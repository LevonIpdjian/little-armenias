// ===== Internationalization (i18n) =====
const translations = {
    en: {
        'nav.map': 'Map',
        'nav.list': 'List',
        'nav.submit': 'Submit',
        'nav.admin': 'Admin',
        'filter.search': 'Search by name, city, country...',
        'filter.all': 'All',
        'filter.church': 'Churches',
        'filter.monument': 'Monuments',
        'filter.museum': 'Museums',
        'filter.restaurant': 'Restaurants',
        'filter.cultural': 'Cultural Centers',
        'list.title': 'Points of Interest by Location',
        'list.empty': 'No locations match your search.',
        'submit.title': 'Submit a New Point of Interest',
        'submit.note': 'All submissions are reviewed and verified by administrators before being published.',
        'submit.name': 'Name',
        'submit.nameEn': 'Name (English)',
        'submit.nameFr': 'Name (French)',
        'submit.nameHy': 'Name (Armenian)',
        'submit.category': 'Category',
        'submit.country': 'Country',
        'submit.city': 'City',
        'submit.lat': 'Latitude',
        'submit.lng': 'Longitude',
        'submit.descEn': 'Description (English)',
        'submit.descFr': 'Description (French)',
        'submit.descHy': 'Description (Armenian)',
        'submit.image': 'Image URL',
        'submit.btn': 'Submit for Review',
        'submit.success': 'Thank you! Your submission is pending review.',
        'admin.title': 'Administration Panel',
        'admin.pending': 'Pending Submissions',
        'admin.manage': 'Manage Locations',
        'admin.comments': 'Moderate Comments',
        'admin.data': 'Data Management',
        'admin.export': 'Export Database (JSON)',
        'admin.import': 'Import Data (JSON)',
        'admin.approved': 'Submission approved!',
        'admin.rejected': 'Submission rejected.',
        'admin.deleted': 'Location deleted.',
        'admin.imported': 'Data imported successfully!',
        'admin.noPending': 'No pending submissions.',
        'admin.noComments': 'No comments to moderate.',
        'detail.rate': 'Rate this place',
        'detail.comments': 'Comments',
        'detail.addComment': 'Add a comment...',
        'detail.commentBtn': 'Post',
        'detail.share': 'Share',
        'detail.unverified': 'Not verified',
        'correction.title': 'Suggest a Correction',
        'correction.field': 'Field to Correct',
        'correction.details': 'Correction Details',
        'correction.submit': 'Submit Correction',
        'correction.success': 'Correction submitted for review. Thank you!',
        'report.title': 'Report Content',
        'report.reason': 'Reason',
        'report.inaccurate': 'Inaccurate Information',
        'report.inappropriate': 'Inappropriate Content',
        'report.duplicate': 'Duplicate Location',
        'report.closed': 'Location Closed/No Longer Exists',
        'report.other': 'Other',
        'report.details': 'Details',
        'report.submit': 'Submit Report',
        'report.success': 'Report submitted. Thank you!',
        'popup.details': 'Details',
        'popup.correct': 'Suggest correction',
        'popup.report': 'Report',
        'popup.share': 'Share',
        'category.church': 'Church',
        'category.monument': 'Monument',
        'category.museum': 'Museum',
        'category.restaurant': 'Restaurant',
        'category.cultural_center': 'Cultural Center',
        'quote.saroyan': '\u00ab ... For when two of them meet anywhere in the world, see if they will not create a New Armenia. \u00bb'
    },
    fr: {
        'nav.map': 'Carte',
        'nav.list': 'Liste',
        'nav.submit': 'Soumettre',
        'nav.admin': 'Admin',
        'filter.search': 'Rechercher par nom, ville, pays...',
        'filter.all': 'Tout',
        'filter.church': '\u00c9glises',
        'filter.monument': 'Monuments',
        'filter.museum': 'Mus\u00e9es',
        'filter.restaurant': 'Restaurants',
        'filter.cultural': 'Centres culturels',
        'list.title': "Points d'int\u00e9r\u00eat par lieu",
        'list.empty': 'Aucun lieu ne correspond \u00e0 votre recherche.',
        'submit.title': "Soumettre un nouveau point d'int\u00e9r\u00eat",
        'submit.note': 'Toutes les soumissions sont examin\u00e9es et v\u00e9rifi\u00e9es par les administrateurs avant publication.',
        'submit.name': 'Nom',
        'submit.nameEn': 'Nom (Anglais)',
        'submit.nameFr': 'Nom (Fran\u00e7ais)',
        'submit.nameHy': 'Nom (Arm\u00e9nien)',
        'submit.category': 'Cat\u00e9gorie',
        'submit.country': 'Pays',
        'submit.city': 'Ville',
        'submit.lat': 'Latitude',
        'submit.lng': 'Longitude',
        'submit.descEn': 'Description (Anglais)',
        'submit.descFr': 'Description (Fran\u00e7ais)',
        'submit.descHy': 'Description (Arm\u00e9nien)',
        'submit.image': "URL de l'image",
        'submit.btn': 'Soumettre pour examen',
        'submit.success': 'Merci\u00a0! Votre soumission est en attente de v\u00e9rification.',
        'admin.title': "Panneau d'administration",
        'admin.pending': 'Soumissions en attente',
        'admin.manage': 'G\u00e9rer les lieux',
        'admin.comments': 'Mod\u00e9rer les commentaires',
        'admin.data': 'Gestion des donn\u00e9es',
        'admin.export': 'Exporter la base (JSON)',
        'admin.import': 'Importer des donn\u00e9es (JSON)',
        'admin.approved': 'Soumission approuv\u00e9e\u00a0!',
        'admin.rejected': 'Soumission rejet\u00e9e.',
        'admin.deleted': 'Lieu supprim\u00e9.',
        'admin.imported': 'Donn\u00e9es import\u00e9es avec succ\u00e8s\u00a0!',
        'admin.noPending': 'Aucune soumission en attente.',
        'admin.noComments': 'Aucun commentaire \u00e0 mod\u00e9rer.',
        'detail.rate': 'Notez ce lieu',
        'detail.comments': 'Commentaires',
        'detail.addComment': 'Ajouter un commentaire...',
        'detail.commentBtn': 'Publier',
        'detail.share': 'Partager',
        'detail.unverified': 'Non v\u00e9rifi\u00e9',
        'correction.title': 'Sugg\u00e9rer une correction',
        'correction.field': 'Champ \u00e0 corriger',
        'correction.details': 'D\u00e9tails de la correction',
        'correction.submit': 'Soumettre la correction',
        'correction.success': 'Correction soumise pour examen. Merci\u00a0!',
        'report.title': 'Signaler un contenu',
        'report.reason': 'Raison',
        'report.inaccurate': 'Informations inexactes',
        'report.inappropriate': 'Contenu inappropri\u00e9',
        'report.duplicate': 'Lieu en double',
        'report.closed': "Le lieu n'existe plus",
        'report.other': 'Autre',
        'report.details': 'D\u00e9tails',
        'report.submit': 'Envoyer le signalement',
        'report.success': 'Signalement envoy\u00e9. Merci\u00a0!',
        'popup.details': 'D\u00e9tails',
        'popup.correct': 'Sugg\u00e9rer une correction',
        'popup.report': 'Signaler',
        'popup.share': 'Partager',
        'category.church': '\u00c9glise',
        'category.monument': 'Monument',
        'category.museum': 'Mus\u00e9e',
        'category.restaurant': 'Restaurant',
        'category.cultural_center': 'Centre culturel',
        'quote.saroyan': '\u00ab ... Car il suffirait que deux d\u2019entre eux se rencontrent, n\u2019importe o\u00f9 dans le monde pour qu\u2019ils cr\u00e9ent une nouvelle Arm\u00e9nie. \u00bb'
    },
    hy: {
        'nav.map': '\u0554\u0561\u0580\u057f\u0565\u0566',
        'nav.list': '\u0551\u0561\u0576\u056f',
        'nav.submit': '\u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c',
        'nav.admin': '\u053f\u0561\u057c\u0561\u057e\u0561\u0580\u0578\u0582\u0574',
        'filter.search': '\u0555\u0580\u0578\u0576\u0565\u056c \u0561\u0576\u0578\u0582\u0576\u0578\u057e, \u0584\u0561\u0572\u0561\u0584\u0578\u057e, \u0565\u0580\u056f\u0580\u0578\u057e...',
        'filter.all': '\u0532\u0578\u056c\u0578\u0580\u0568',
        'filter.church': '\u0535\u056f\u0565\u0572\u0565\u0581\u056b\u0576\u0565\u0580',
        'filter.monument': '\u0540\u0578\u0582\u0577\u0561\u0580\u0571\u0561\u0576\u0576\u0565\u0580',
        'filter.museum': '\u0539\u0561\u0576\u0563\u0561\u0580\u0561\u0576\u0576\u0565\u0580',
        'filter.restaurant': '\u054c\u0565\u057d\u057f\u0578\u0580\u0561\u0576\u0576\u0565\u0580',
        'filter.cultural': '\u0544\u0577\u0561\u056f\u0578\u0582\u0569\u0561\u0575\u056b\u0576 \u056f\u0565\u0576\u057f\u0580\u0578\u0576\u0576\u0565\u0580',
        'list.title': '\u0540\u0565\u057f\u0561\u0584\u0580\u0584\u0580\u0578\u0582\u0569\u0575\u0561\u0576 \u057e\u0561\u0575\u0580\u0565\u0580 \u0568\u057d\u057f \u057f\u0565\u0572\u0561\u0576\u0584\u056b',
        'list.empty': '\u0548\u0579 \u0574\u056b \u057e\u0561\u0575\u0580 \u0579\u056b \u0570\u0561\u0574\u0561\u057a\u0561\u057f\u0561\u057d\u056d\u0561\u0576\u0578\u0582\u0574 \u0571\u0565\u0580 \u0578\u0580\u0578\u0576\u0574\u0561\u0576\u0568\u0589',
        'submit.title': '\u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0576\u0578\u0580 \u0570\u0565\u057f\u0561\u0584\u0580\u0584\u0580\u0578\u0582\u0569\u0575\u0561\u0576 \u057e\u0561\u0575\u0580',
        'submit.note': '\u0532\u0578\u056c\u0578\u0580 \u0576\u0565\u0580\u056f\u0561\u0575\u0561\u0581\u057e\u0561\u056e\u0576\u0565\u0580\u0568 \u057d\u057f\u0578\u0582\u0563\u057e\u0578\u0582\u0574 \u0565\u0576 \u0561\u0564\u0574\u056b\u0576\u056b\u057d\u057f\u0580\u0561\u057f\u0578\u0580\u0576\u0565\u0580\u056b \u056f\u0578\u0572\u0574\u056b\u0581\u0589',
        'submit.name': '\u0531\u0576\u0578\u0582\u0576',
        'submit.nameEn': '\u0531\u0576\u0578\u0582\u0576 (\u0531\u0576\u0563\u056c\u0565\u0580\u0565\u0576)',
        'submit.nameFr': '\u0531\u0576\u0578\u0582\u0576 (\u0556\u0580\u0561\u0576\u057d\u0565\u0580\u0565\u0576)',
        'submit.nameHy': '\u0531\u0576\u0578\u0582\u0576 (\u0540\u0561\u0575\u0565\u0580\u0565\u0576)',
        'submit.category': '\u053f\u0561\u057f\u0565\u0563\u0578\u0580\u056b\u0561',
        'submit.country': '\u0535\u0580\u056f\u056b\u0580',
        'submit.city': '\u0554\u0561\u0572\u0561\u0584',
        'submit.lat': '\u053c\u0561\u0575\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576',
        'submit.lng': '\u0535\u0580\u056f\u0561\u0575\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576',
        'submit.descEn': '\u0546\u056f\u0561\u0580\u0561\u0563\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576 (\u0531\u0576\u0563\u056c\u0565\u0580\u0565\u0576)',
        'submit.descFr': '\u0546\u056f\u0561\u0580\u0561\u0563\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576 (\u0556\u0580\u0561\u0576\u057d\u0565\u0580\u0565\u0576)',
        'submit.descHy': '\u0546\u056f\u0561\u0580\u0561\u0563\u0580\u0578\u0582\u0569\u0575\u0578\u0582\u0576 (\u0540\u0561\u0575\u0565\u0580\u0565\u0576)',
        'submit.image': '\u054a\u0561\u057f\u056f\u0565\u0580\u056b URL',
        'submit.btn': '\u0548\u0582\u0572\u0561\u0580\u056f\u0565\u056c \u057d\u057f\u0578\u0582\u0563\u0574\u0561\u0576 \u0570\u0561\u0574\u0561\u0580',
        'submit.success': '\u0547\u0576\u0578\u0580\u0570\u0561\u056f\u0561\u056c\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0589 \u0541\u0565\u0580 \u0576\u0565\u0580\u056f\u0561\u0575\u0561\u0581\u0578\u0582\u0574\u0568 \u057d\u057a\u0561\u057d\u0578\u0582\u0574 \u0567 \u057d\u057f\u0578\u0582\u0563\u0574\u0561\u0576\u0589',
        'admin.title': '\u053f\u0561\u057c\u0561\u057e\u0561\u0580\u0574\u0561\u0576 \u057e\u0561\u0570\u0561\u0576\u0561\u056f',
        'admin.pending': '\u054d\u057a\u0561\u057d\u057e\u0578\u0572 \u0576\u0565\u0580\u056f\u0561\u0575\u0561\u0581\u0578\u0582\u0574\u0576\u0565\u0580',
        'admin.manage': '\u053f\u0561\u057c\u0561\u057e\u0561\u0580\u0565\u056c \u057e\u0561\u0575\u0580\u0565\u0580\u0568',
        'admin.comments': '\u0544\u0578\u0564\u0565\u0580\u0561\u0581\u0576\u0565\u056c \u0574\u0565\u056f\u0576\u0561\u0562\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0576\u0565\u0580\u0568',
        'admin.data': '\u054f\u057e\u0575\u0561\u056c\u0576\u0565\u0580\u056b \u056f\u0561\u057c\u0561\u057e\u0561\u0580\u0578\u0582\u0574',
        'admin.export': '\u0531\u0580\u057f\u0561\u0570\u0561\u0576\u0565\u056c \u057f\u057e\u0575\u0561\u056c\u0576\u0565\u0580\u056b \u0562\u0561\u0566\u0561 (JSON)',
        'admin.import': '\u0546\u0565\u0580\u0574\u0578\u0582\u056e\u0565\u056c \u057f\u057e\u0575\u0561\u056c\u0576\u0565\u0580 (JSON)',
        'admin.approved': '\u0546\u0565\u0580\u056f\u0561\u0575\u0561\u0581\u0578\u0582\u0574\u0568 \u0570\u0561\u057d\u057f\u0561\u057f\u057e\u0565\u0581\u0589',
        'admin.rejected': '\u0546\u0565\u0580\u056f\u0561\u0575\u0561\u0581\u0578\u0582\u0574\u0568 \u0574\u0565\u0580\u056a\u057e\u0565\u0581\u0589',
        'admin.deleted': '\u054e\u0561\u0575\u0580\u0568 \u057b\u0576\u057b\u057e\u0565\u0581\u0589',
        'admin.imported': '\u054f\u057e\u0575\u0561\u056c\u0576\u0565\u0580\u0568 \u0570\u0561\u057b\u0578\u0572\u0578\u0582\u0569\u0575\u0561\u0574\u0562 \u0576\u0565\u0580\u0574\u0578\u0582\u056e\u057e\u0565\u0581\u0589',
        'admin.noPending': '\u054d\u057a\u0561\u057d\u057e\u0578\u0572 \u0576\u0565\u0580\u056f\u0561\u0575\u0561\u0581\u0578\u0582\u0574\u0576\u0565\u0580 \u0579\u056f\u0561\u0576\u0589',
        'admin.noComments': '\u0544\u0578\u0564\u0565\u0580\u0561\u0581\u0574\u0561\u0576 \u0565\u0576\u0569\u0561\u056f\u0561 \u0574\u0565\u056f\u0576\u0561\u0562\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0576\u0565\u0580 \u0579\u056f\u0561\u0576\u0589',
        'detail.rate': '\u0533\u0576\u0561\u0570\u0561\u057f\u0565\u0584 \u0561\u0575\u057d \u057e\u0561\u0575\u0580\u0568',
        'detail.comments': '\u0544\u0565\u056f\u0576\u0561\u0562\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0576\u0565\u0580',
        'detail.addComment': '\u0531\u057e\u0565\u056c\u0561\u0581\u0576\u0565\u056c \u0574\u0565\u056f\u0576\u0561\u0562\u0561\u0576\u0578\u0582\u0569\u0575\u0578\u0582\u0576...',
        'detail.commentBtn': '\u0540\u0580\u0561\u057a\u0561\u0580\u0561\u056f\u0565\u056c',
        'detail.share': '\u053f\u056b\u057d\u0565\u056c',
        'detail.unverified': '\u0549\u057d\u057f\u0578\u0582\u0563\u057e\u0561\u056e',
        'correction.title': '\u0531\u057c\u0561\u057b\u0561\u0580\u056f\u0565\u056c \u0578\u0582\u0572\u0572\u0578\u0582\u0574',
        'correction.field': '\u0548\u0582\u0572\u0572\u0565\u056c\u056b \u0564\u0561\u0577\u057f\u0568',
        'correction.details': '\u0548\u0582\u0572\u0572\u0574\u0561\u0576 \u0574\u0561\u0576\u0580\u0561\u0574\u0561\u057d\u0576\u0565\u0580\u0568',
        'correction.submit': '\u0548\u0582\u0572\u0561\u0580\u056f\u0565\u056c \u0578\u0582\u0572\u0572\u0578\u0582\u0574\u0568',
        'correction.success': '\u0548\u0582\u0572\u0572\u0578\u0582\u0574\u0568 \u0578\u0582\u0572\u0561\u0580\u056f\u057e\u0565\u0581 \u057d\u057f\u0578\u0582\u0563\u0574\u0561\u0576 \u0570\u0561\u0574\u0561\u0580\u0589 \u0547\u0576\u0578\u0580\u0570\u0561\u056f\u0561\u056c\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0589',
        'report.title': '\u0532\u0578\u0572\u0578\u0584\u0565\u056c \u0562\u0578\u057e\u0561\u0576\u0564\u0561\u056f\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u056b\u0581',
        'report.reason': '\u054a\u0561\u057f\u0573\u0561\u057c',
        'report.inaccurate': '\u0548\u0579 \u0573\u056b\u0577\u057f \u057f\u0565\u0572\u0565\u056f\u0561\u057f\u057e\u0578\u0582\u0569\u0575\u0578\u0582\u0576',
        'report.inappropriate': '\u0531\u0576\u057a\u0561\u057f\u0565\u0570 \u0562\u0578\u057e\u0561\u0576\u0564\u0561\u056f\u0578\u0582\u0569\u0575\u0578\u0582\u0576',
        'report.duplicate': '\u053f\u0580\u056f\u0576\u0561\u056f \u057e\u0561\u0575\u0580',
        'report.closed': '\u054e\u0561\u0575\u0580\u0568 \u0583\u0561\u056f\u057e\u0561\u056e/\u0561\u0575\u056c\u0565\u057d \u0563\u0578\u0575\u0578\u0582\u0569\u0575\u0578\u0582\u0576 \u0579\u0578\u0582\u0576\u056b',
        'report.other': '\u0531\u0575\u056c',
        'report.details': '\u0544\u0561\u0576\u0580\u0561\u0574\u0561\u057d\u0576\u0565\u0580',
        'report.submit': '\u0548\u0582\u0572\u0561\u0580\u056f\u0565\u056c \u0562\u0578\u0572\u0578\u0584\u0568',
        'report.success': '\u0532\u0578\u0572\u0578\u0584\u0568 \u0578\u0582\u0572\u0561\u0580\u056f\u057e\u0565\u0581\u0589 \u0547\u0576\u0578\u0580\u0570\u0561\u056f\u0561\u056c\u0578\u0582\u0569\u0575\u0578\u0582\u0576\u0589',
        'popup.details': '\u0544\u0561\u0576\u0580\u0561\u0574\u0561\u057d\u0576\u0565\u0580',
        'popup.correct': '\u0531\u057c\u0561\u057b\u0561\u0580\u056f\u0565\u056c \u0578\u0582\u0572\u0572\u0578\u0582\u0574',
        'popup.report': '\u0532\u0578\u0572\u0578\u0584\u0565\u056c',
        'popup.share': '\u053f\u056b\u057d\u0565\u056c',
        'category.church': '\u0535\u056f\u0565\u0572\u0565\u0581\u056b',
        'category.monument': '\u0540\u0578\u0582\u0577\u0561\u0580\u0571\u0561\u0576',
        'category.museum': '\u0539\u0561\u0576\u0563\u0561\u0580\u0561\u0576',
        'category.restaurant': '\u054c\u0565\u057d\u057f\u0578\u0580\u0561\u0576',
        'category.cultural_center': '\u0544\u0577\u0561\u056f\u0578\u0582\u0569\u0561\u0575\u056b\u0576 \u056f\u0565\u0576\u057f\u0580\u0578\u0576',
        'quote.saroyan': '\u00ab ... \u0532\u0561\u057e\u0561\u056f\u0561\u0576 \u056f\u056c\u056b\u0576\u0565\u0580 \u0576\u0580\u0561\u0576\u0581\u056b\u0581 \u0565\u0580\u056f\u0578\u0582\u057d\u056b\u0576 \u0570\u0561\u0576\u0564\u056b\u057a\u0565\u056b\u0576, \u0561\u0577\u056d\u0561\u0580\u0570\u056b \u0581\u0561\u0576\u056f\u0561\u0581\u0561\u056e \u057f\u0565\u0572\u0578\u0582\u0574, \u0576\u0578\u0580 \u0540\u0561\u0575\u0561\u057d\u057f\u0561\u0576 \u057d\u057f\u0565\u0572\u056e\u0565\u056c\u0578\u0582 \u0570\u0561\u0574\u0561\u0580\u0589 \u00bb'
    }
};

let currentLang = 'en';

function t(key) {
    return (translations[currentLang] && translations[currentLang][key]) || translations.en[key] || key;
}

function setLanguage(lang) {
    currentLang = lang;
    document.documentElement.setAttribute('data-lang', lang);
    document.documentElement.setAttribute('lang', lang);

    // Update all elements with data-i18n
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        el.textContent = t(key);
    });

    // Update placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        el.setAttribute('placeholder', t(key));
    });

    // Update language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.textContent.trim() === (lang === 'hy' ? '\u0540\u0545' : lang.toUpperCase()));
    });

    // Refresh dynamic content
    if (typeof refreshCurrentView === 'function') {
        refreshCurrentView();
    }
}
